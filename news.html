<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Latest news and updates from Kageyo TVET School, located in Gicumbi district, Kaniga sector.">
    <meta name="author" content="jobeuse| yobu| job| iradukunda">
    <title>Kageyo TVET School | News</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link href="images/LOGO-KAGEYO-TVET.png" rel="icon">
    <style>
        /* Existing styles remain the same */
        .dropdown-menu {
            display: none;
            transition: all 0.3s ease-in-out;
            z-index: 1000;
        }
        .dropdown-menu.active {
            display: block;
        }
        @media (min-width: 769px) {
            .dropdown-menu {
                position: absolute;
                background-color: #ffffff;
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
                border-radius: 0.375rem;
                min-width: 12rem;
                top: 100%;
                left: 0;
            }
        }
        @media (max-width: 768px) {
            #loader {
                position: absolute;
                left: 50%;
                top: 50%;
                z-index: 1;
                transform: translate(-50%, -50%);
            }
            .dropdown-menu {
                position: static;
                box-shadow: none;
                background-color: #f3f4f6;
                width: 100%;
                display: none;
            }
            .dropdown-menu.active {
                display: block;
            }
        }
        /* Accessibility styles */
        :focus {
            outline: 3px solid #1D4ED8;
            outline-offset: 2px;
        }
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }
        /* Chatbot styles */
        #chatbot-window {
            display: none;
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 360px;
            max-height: 480px;
            background-color: #ffffff;
            border-radius: 0.5rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            z-index: 1000;
            overflow: hidden;
        }
        #chatbot-window.active {
            display: block;
        }
        #chatbot-messages {
            height: 360px;
            overflow-y: auto;
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
        }
        #chatbot-input {
            width: 100%;
            padding: 0.75rem;
            border: none;
            outline: none;
            font-size: 1rem;
        }
        #chatbot-input:focus {
            outline: 2px solid #1D4ED8;
        }
        #chatbot-header {
            background-color: #1D4ED8;
            color: white;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .chatbot-user-message {
            background-color: #e3f2fd;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            margin: 0.5rem 0;
            max-width: 80%;
            align-self: flex-end;
        }
        .chatbot-bot-message {
            background-color: #f3f4f6;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            margin: 0.5rem 0;
            max-width: 80%;
        }
        .chatbot-link {
            color: #1D4ED8;
            text-decoration: underline;
        }
        /* Admin Panel Styles */
        #admin-panel {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 2rem;
            border-radius: 0.5rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            z-index: 1001;
            width: 90%;
            max-width: 500px;
        }
        #admin-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }
        .admin-active #admin-panel,
        .admin-active #admin-overlay {
            display: block;
        }
        /* News Grid Styles */
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
        }
        .news-card {
            background: white;
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        .news-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }
        .news-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        .news-content {
            padding: 1.5rem;
        }
        .news-date {
            color: #6b7280;
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
        }
        .news-title {
            font-size: 1.125rem;
            font-weight: bold;
            color: #1e40af;
            margin-bottom: 0.75rem;
            line-height: 1.4;
        }
        .news-excerpt {
            color: #4b5563;
            line-height: 1.6;
            margin-bottom: 1rem;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .read-more-btn {
            color: #1e40af;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            transition: color 0.3s ease;
        }
        .read-more-btn:hover {
            color: #1e3a8a;
        }
        .read-more-btn i {
            margin-left: 0.5rem;
            transition: transform 0.3s ease;
        }
        .read-more-btn:hover i {
            transform: translateX(3px);
        }
        /* Featured News Styles */
        .featured-news {
            grid-column: 1 / -1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
            cursor: pointer;
        }
        @media (max-width: 768px) {
            .featured-news {
                grid-template-columns: 1fr;
            }
        }
        .featured-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: 0.5rem;
        }
        .featured-content {
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .featured-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1e40af;
            margin-bottom: 1rem;
        }
        .featured-excerpt {
            color: #4b5563;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }
        /* Image upload preview */
        .image-preview {
            max-width: 100%;
            max-height: 200px;
            margin-top: 10px;
            display: none;
        }
        .image-preview img {
            max-width: 100%;
            max-height: 200px;
            object-fit: cover;
            border-radius: 0.5rem;
        }
        
        /* NEW STYLES FOR SINGLE PAGE NEWS */
        .news-detail-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        .news-detail-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 0.5rem;
            margin-bottom: 2rem;
        }
        .news-detail-title {
            font-size: 2.25rem;
            font-weight: bold;
            color: #1e40af;
            margin-bottom: 1rem;
            line-height: 1.3;
        }
        .news-detail-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e5e7eb;
        }
        .news-detail-author {
            font-weight: 600;
            color: #374151;
        }
        .news-detail-date {
            color: #6b7280;
        }
        .news-detail-content {
            font-size: 1.125rem;
            line-height: 1.7;
            color: #4b5563;
            margin-bottom: 3rem;
        }
        .news-detail-content p {
            margin-bottom: 1.5rem;
        }
        .back-to-news-btn {
            display: inline-flex;
            align-items: center;
            background-color: #1e40af;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            font-weight: 600;
            transition: background-color 0.3s ease;
            margin-bottom: 2rem;
        }
        .back-to-news-btn:hover {
            background-color: #1e3a8a;
        }
        .back-to-news-btn i {
            margin-right: 0.5rem;
        }
        
        /* Navigation styles for single page */
        .page-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid #e5e7eb;
        }
        .nav-btn {
            display: flex;
            align-items: center;
            padding: 0.75rem 1.5rem;
            background-color: #f3f4f6;
            border-radius: 0.375rem;
            color: #374151;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .nav-btn:hover {
            background-color: #1e40af;
            color: white;
        }
        .nav-btn.prev i {
            margin-right: 0.5rem;
        }
        .nav-btn.next i {
            margin-left: 0.5rem;
        }
        
        /* Related news section */
        .related-news {
            margin-top: 4rem;
        }
        .related-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1e40af;
            margin-bottom: 1.5rem;
        }
        
        /* Animation for page transitions */
        .page-transition {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Loading indicator */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
        }
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f4f6;
            border-top: 4px solid #1e40af;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-100 font-roboto" onload="myFunction()">
    <header class="bg-white shadow" role="banner">
        <div class="bg-blue-600 text-white py-2">
            <div class="container mx-auto px-4 flex justify-end">
                <a href="https://chat.whatsapp.com/EkDQiiIS9SYHg8HEZ7cVZ6" target="_blank" class="hover:underline" aria-label="Join Kageyo TVET School WhatsApp Group">
                    <i class="fab fa-whatsapp mr-2" aria-hidden="true"></i>Join WhatsApp Group
                </a>
            </div>
        </div>
        <div class="container mx-auto px-4 py-4">
            <nav class="flex flex-wrap items-center justify-between" role="navigation" aria-label="Main navigation">
                <div class="flex items-center space-x-4">
                    <a href="index.html" aria-label="Kageyo TVET School Home">
                        <img src="logo.jpg" alt="Kageyo TVET School Logo" class="w-20 h-20">
                    </a>
                    <div>
                        <h1>
                            <a href="index.html" class="text-2xl font-bold text-blue-600">KAGEYO TVET SCHOOL</a>
                        </h1>
                        <p class="text-sm text-gray-500">WORK - COURAGE - SOLIDARITY</p>
                    </div>
                </div>
                <button class="md:hidden text-blue-600" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="navbar" onclick="toggleNav()">
                    <i class="fas fa-bars" aria-hidden="true"></i>
                    <span class="sr-only">Toggle menu</span>
                </button>
                <div id="navbar" class="hidden md:flex md:items-center w-full md:w-auto mt-4 md:mt-0" role="menu">
                    <ul class="flex flex-col md:flex-row md:space-x-6 w-full md:w-auto">
                        <li><a href="index.html" class="block py-2 text-blue-600 hover:text-blue-800" role="menuitem">Home</a></li>
                        <li><a href="about.html" class="block py-2 text-blue-600 hover:text-blue-800" role="menuitem">About Us</a></li>
                        <li><a href="apply job.html" class="block py-2 text-blue-600 hover:text-blue-800" role="menuitem">Apply for a Job</a></li>
                        <li class="relative dropdown">
                            <button class="block py-2 text-blue-600 hover:text-blue-800 flex items-center" aria-expanded="false" aria-controls="admin-menu" onclick="toggleDropdown('admin-menu')" role="menuitem">
                                Administration <i class="fas fa-chevron-down ml-2" aria-hidden="true"></i>
                                <span class="sr-only">Toggle Administration submenu</span>
                            </button>
                            <ul id="admin-menu" class="dropdown-menu bg-white shadow-lg mt-2 rounded-md w-48" role="menu">
                                <li><a href="staff.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Staff</a></li>
                            </ul>
                        </li>
                        <li><a href="trainers.html" class="block py-2 text-blue-600 hover:text-blue-800" role="menuitem">Trainers</a></li>
                        <li><a href="trades.html" class="block py-2 text-blue-600 hover:text-blue-800" role="menuitem">Trades</a></li>
                        <li class="relative dropdown">
                            <button class="block py-2 text-blue-600 hover:text-blue-800 flex items-center" aria-expanded="false" aria-controls="more-menu" onclick="toggleDropdown('more-menu')" role="menuitem">
                                More <i class="fas fa-chevron-down ml-2" aria-hidden="true"></i>
                                <span class="sr-only">Toggle More submenu</span>
                            </button>
                            <ul id="more-menu" class="dropdown-menu bg-white shadow-lg mt-2 rounded-md w-48" role="menu">
                                <li><a href="news.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">News</a></li>
                                <li><a href="events.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Events</a></li>
                                <li><a href="announcements.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Announcements</a></li>
                                <li><a href="best-performers.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Best Performers</a></li>
                                <li><a href="head-teacher.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Head Teacher</a></li>
                                <li><a href="student-papers.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Student Papers</a></li>
                                <li><a href="employee-of-the-year.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Employee of the Year</a></li>
                                <li><a href="forum.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Forum</a></li>
                                <li><a href="developers.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Developers</a></li>
                                <li><a href="student-projects.html" class="block px-4 py-2 text-blue-600 hover:bg-blue-100" role="menuitem">Student Projects</a></li>
                            </ul>
                        </li>
                        <li><a href="contact.html" class="block py-2 text-blue-600 hover:text-blue-800" role="menuitem">Contact</a></li>
                    </ul>
                </div>
            </nav>
        </div>
    </header>

    <!-- Admin Panel (Hidden by default) -->
    <div id="admin-overlay"></div>
    <div id="admin-panel">
        <h2 class="text-2xl font-bold text-blue-600 mb-4">Admin Login</h2>
        <div class="mb-4">
            <label for="admin-password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
            <input type="password" id="admin-password" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Enter admin password">
        </div>
        <div class="flex space-x-2">
            <button onclick="adminLogin()" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex-1">Login</button>
            <button onclick="closeAdminPanel()" class="bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 flex-1">Cancel</button>
        </div>
    </div>

    <!-- Admin Controls (Visible after login) -->
    <div id="admin-controls" class="hidden bg-yellow-100 border-l-4 border-yellow-500 p-4 mb-4">
        <div class="container mx-auto max-w-7xl px-4">
            <div class="flex justify-between items-center">
                <p class="text-yellow-700 font-semibold">Admin Mode Active</p>
                <div class="space-x-2">
                    <button onclick="showAddNewsForm()" class="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700">Add News</button>
                    <button onclick="adminLogout()" class="bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700">Logout</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add News Form (Hidden by default) -->
    <div id="add-news-form" class="hidden bg-white p-6 rounded-lg shadow-lg mb-8">
        <div class="container mx-auto max-w-7xl px-4">
            <h3 class="text-xl font-bold text-blue-600 mb-4">Add New Article</h3>
            <form id="news-form" class="space-y-4" enctype="multipart/form-data">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="news-title" class="block text-sm font-medium text-gray-700 mb-1">Title</label>
                        <input type="text" id="news-title" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div>
                        <label for="news-author" class="block text-sm font-medium text-gray-700 mb-1">Author</label>
                        <input type="text" id="news-author" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                </div>
                <div>
                    <label for="news-date" class="block text-sm font-medium text-gray-700 mb-1">Date</label>
                    <input type="date" id="news-date" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                <div>
                    <label for="news-image" class="block text-sm font-medium text-gray-700 mb-1">Upload Image</label>
                    <input type="file" id="news-image" accept="image/*" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <div class="image-preview mt-2" id="image-preview">
                        <img id="preview-img" src="" alt="Image preview">
                    </div>
                </div>
                <div>
                    <label for="news-content" class="block text-sm font-medium text-gray-700 mb-1">Content</label>
                    <textarea id="news-content" rows="6" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required></textarea>
                </div>
                <div class="flex space-x-2">
                    <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">Add Article</button>
                    <button type="button" onclick="hideAddNewsForm()" class="bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <main role="main" id="main-content">
        <!-- News Navigation -->
        <nav class="sticky top-0 bg-gray-100 shadow-sm z-10" aria-label="News navigation">
            <div class="container mx-auto max-w-7xl px-4 py-2">
                <div class="flex justify-between items-center">
                    <p class="text-lg font-semibold text-gray-800 uppercase">News</p>
                    <div class="flex items-center space-x-4">
                        <button class="navbar-toggler" type="button" aria-controls="subNavbarSupportedContent" aria-expanded="false" aria-label="Toggle news submenu" onclick="toggleSubNav()">
                            <i class="fas fa-sort-down text-gray-600 text-xl" aria-hidden="true"></i>
                        </button>
                        <!-- Admin Access Button -->
                        <button onclick="openAdminPanel()" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 flex items-center">
                            <i class="fas fa-lock mr-1" aria-hidden="true"></i> Admin
                        </button>
                    </div>
                    <div class="hidden md:flex" id="subNavbarSupportedContent">
                        <ul class="flex space-x-4" id="subNavOptionn">
                            <li class="nav-item active">
                                <a class="text-gray-600 hover:text-blue-600 font-semibold" href="#" onclick="showNewsList()" aria-current="page">Latest News</a>
                            </li>
                            <li class="nav-item">
                                <a class="text-gray-600 hover:text-blue-600 font-semibold" href="#" onclick="showAllNews()">All News</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>

        <!-- News List View (Default) -->
        <section id="news-list-view" class="py-16 bg-white page-transition" aria-label="Latest News">
            <div class="container mx-auto max-w-7xl px-4">
                <div class="mb-12">
                    <h1 class="text-3xl font-bold text-blue-600 mb-2">Latest News</h1>
                    <div class="flex space-x-2 text-sm text-gray-600">
                        <a href="index.html" class="hover:text-blue-600" aria-label="Go to Home page">Home</a>
                        <span>/</span>
                        <a href="#" class="text-blue-600" aria-current="page" onclick="showNewsList()">News</a>
                    </div>
                </div>
                
                <!-- Featured News Section -->
                <div id="featured-news" class="mb-12">
                    <!-- Featured news will be dynamically loaded here -->
                </div>
                
                <!-- News Grid Section -->
                <div class="mb-12">
                    <h2 class="text-2xl font-bold text-blue-600 mb-6">More News</h2>
                    <div id="news-grid" class="news-grid">
                        <!-- News items will be dynamically loaded here -->
                    </div>
                </div>
                
                <!-- Pagination -->
                <div class="mt-12">
                    <ul class="flex justify-center space-x-4" aria-label="News pagination" id="pagination">
                        <!-- Pagination will be dynamically loaded here -->
                    </ul>
                </div>
            </div>
        </section>

        <!-- News Detail View (Hidden by default) -->
        <section id="news-detail-view" class="py-16 bg-white page-transition" style="display: none;" aria-label="News Detail">
            <div class="news-detail-container">
                <button class="back-to-news-btn" onclick="showNewsList()">
                    <i class="fas fa-arrow-left"></i> Back to News
                </button>
                
                <div id="news-detail-content">
                    <!-- News detail content will be dynamically loaded here -->
                </div>
            </div>
        </section>

        <!-- YouTube Shorts Section -->
        <section class="py-16 bg-gray-100" aria-label="YouTube Shorts">
            <div class="container mx-auto max-w-7xl px-4">
                <div class="mb-12">
                    <h1 class="text-3xl font-bold text-blue-600 mb-2">Ibizamini bya Kageyo & Shorts</h1>
                    <div class="flex space-x-2 text-sm text-gray-600">
                        <a href="index.html" class="hover:text-blue-600" aria-label="Go to Home page">Ahabanza</a>
                        <span>/</span>
                        <a href="#" class="text-blue-600" aria-current="page" onclick="showNewsList()">Ibizamini & Shorts</a>
                    </div>
                </div>
                <div id="shorts-container" class="news-grid">
                    <!-- YouTube Shorts will be dynamically loaded here -->
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-blue-900 text-white py-12" role="contentinfo">
        <div class="container mx-auto max-w-7xl px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h2><a href="index.html" class="text-2xl font-bold" aria-label="Kageyo TVET School Home">Kageyo TVET School</a></h2>
                    <p class="mt-2">Work - Courage - Solidarity</p>
                    <p class="mt-2">
                        Northern Province<br>
                        Gicumbi District<br>
                        Kaniga Sector
                    </p>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">Useful Links</h3>
                    <ul class="space-y-2">
                        <li><a href="index.html" class="hover:underline" aria-label="Go to Home page">Home</a></li>
                        <li><a href="about.html" class="hover:underline" aria-label="Go to About Us page">About Us</a></li>
                        <li><a href="#" class="hover:underline" aria-label="Go to News page" onclick="showNewsList()">News</a></li>
                        <li><a href="trades.html" class="hover:underline" aria-label="Go to Trades page">Trades</a></li>
                        <li><a href="contact.html" class="hover:underline" aria-label="Go to Contact page">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">Information</h3>
                    <ul class="space-y-2">
                        <li><a href="developers.html" class="hover:underline" aria-label="Go to Developers page">Developers</a></li>
                        <li><a href="student-projects.html" class="hover:underline" aria-label="Go to Student Projects page">Student Projects</a></li>
                    </ul>
                    <!-- Admin Access Button in Footer -->
                    <div class="mt-4">
                        <button onclick="openAdminPanel()" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 flex items-center">
                            <i class="fas fa-lock mr-1" aria-hidden="true"></i> Admin Access
                        </button>
                    </div>
                </div>
            </div>
            <div class="mt-8 text-center">
                <p>Â© Kageyo TVET School 2025</p>
            </div>
        </div>
    </footer>

    <section id="scroll-top" class="fixed bottom-4 right-4 hidden" aria-label="Scroll to top">
        <button class="bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700" aria-label="Scroll to top of page">
            <i class="fas fa-arrow-up" aria-hidden="true"></i>
        </button>
    </section>

    <section id="chatbot" class="fixed bottom-4 right-16" aria-label="Chatbot">
        <button id="chatbot-toggle" class="bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700" aria-label="Toggle chat window" aria-expanded="false" aria-controls="chatbot-window">
            <i class="fas fa-comment-dots" aria-hidden="true"></i>
            <span class="sr-only">Open chat</span>
        </button>
        <div id="chatbot-window" role="dialog" aria-label="Chat with Kageyo TVET School assistant">
            <div id="chatbot-header">
                <span>Kageyo TVET Assistant</span>
                <button id="chatbot-close" class="text-white hover:text-gray-200" aria-label="Close chat window">
                    <i class="fas fa-times" aria-hidden="true"></i>
                </button>
            </div>
            <div id="chatbot-messages" aria-live="polite">
                <div class="chatbot-bot-message">Hi! I'm thrilled to help you explore Kageyo TVET School's latest news, like our Tech Innovation Fair or new Welding Program! Ask about news, salaries, registration, or anything else, and I'll guide you with a smile!</div>
            </div>
            <div class="p-2">
                <input id="chatbot-input" type="text" placeholder="Share your question or worry, I'm all ears!" aria-label="Type your question or concern">
                <button id="chatbot-send" class="bg-blue-600 text-white px-4 py-2 mt-2 rounded hover:bg-blue-700" aria-label="Send message">Send</button>
            </div>
        </div>
    </section>

    <div id="loader" class="text-center" aria-live="polite">Loading site</div>

    <script>
        // News data storage
        let newsData = JSON.parse(localStorage.getItem('kageyoNews')) || [
            {
                id: "tech-fair-2025",
                title: "Guv @NyirarugeroD arimo gusura ibikorwaremezo",
                date: "2025-05-18",
                author: "SHYAKA CLEVER PRINCE",
                image: "https://images.unsplash.com/photo-1523050854058-8df90110c9f1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                content: "Kuri uyu munsi, Guv @NyirarugeroD arimo gusura ibikorwaremezo, birimo G.S Kageyo n'Ikigo Nderabarezi cya Kageyo. Uyu munsi wizihiza umunsi mukuru w'ishuri, aho abanyeshuri bose bahuriye mu birori by'umunsi mukuru. Guv yashimiye abanyeshuri kubera ibikorwa byiza bakora, ndetse yanabahaye inama zo gukomeza gukora neza mu buzima bwa buri munsi. Yashimiye n'abarimu kubera umwete bagira mu kwigisha abanyeshuri, kugira ngo babe abafite ubumenyi buhagije mu buzima bwa buri munsi. Yashimiye n'ababyeyi kubera ko batanga umwete mu kwerekeza abana babo mu ishuri, kugira ngo babe abafite ubumenyi buhagije mu buzima bwa buri munsi. Yashimiye n'abakozi bo mu ishuri kubera umwete bagira mu gukora akazi kabo, kugira ngo ishuri rikomeze kuba ryiza. Yashimiye n'abayobozi b'ishuri kubera umwete bagira mu guteza imbere ishuri, kugira ngo rikomeze kuba ryiza. Yashimiye n'abaturage b'akarere ka Kaniga kubera umwete bagira mu guteza imbere ishuri, kugira ngo rikomeze kuba ryiza. Yashimiye n'abaturage bose b'u Rwanda kubera umwete bagira mu guteza imbere igihugu, kugira ngo cyikomeze kuba cyiza.",
                excerpt: "Kuri uyu munsi, Guv @NyirarugeroD arimo gusura ibikorwaremezo, birimo G.S Kageyo n'Ikigo Nderabarezi cya Kageyo."
            },
            {
                id: "welding-program",
                title: "Abanyeshuri 50 b'ishuri ry'ubukorikori ba Kageyo bahawe ibikoresho bya welding",
                date: "2025-05-15",
                author: "SHYAKA CLEVER PRINCE",
                image: "https://images.unsplash.com/photo-1581094794329-c8112a89af12?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                content: "Abanyeshuri 50 b'ishuri ry'ubukorikori ba Kageyo bahawe ibikoresho bya welding. Ibi bikoresho byazanye impinduka nini mu mwuga wabo, kuko babifashisha mu kwiga no gukora imirimo yo kubaza. Abanyeshuri bose bahawe ibikoresho bishimiye cyane, kuko babona ko ari byo bizabafasha mu kwiga no gukora imirimo yo kubaza. Umuyobozi w'ishuri, yashimiye abahawe ibikoresho, kuko ari byo bizatuma abanyeshuri bakora neza mu kwiga no gukora imirimo yo kubaza. Yashimiye n'ababyeyi kubera ko batanga umwete mu kwerekeza abana babo mu ishuri, kugira ngo babe abafite ubumenyi buhagije mu buzima bwa buri munsi. Yashimiye n'abakozi bo mu ishuri kubera umwete bagira mu gukora akazi kabo, kugira ngo ishuri rikomeze kuba ryiza. Yashimiye n'abayobozi b'ishuri kubera umwete bagira mu guteza imbere ishuri, kugira ngo rikomeze kuba ryiza. Yashimiye n'abaturage b'akarere ka Kaniga kubera umwete bagira mu guteza imbere ishuri, kugira ngo rikomeze kuba ryiza. Yashimiye n'abaturage bose b'u Rwanda kubera umwete bagira mu guteza imbere igihugu, kugira ngo cyikomeze kuba cyiza.",
                excerpt: "Abanyeshuri 50 b'ishuri ry'ubukorikori ba Kageyo bahawe ibikoresho bya welding. Ibi bikoresho byazanye impinduka nini mu mwuga wabo."
            },
            {
                id: "graduation-ceremony",
                title: "Ishuri ry'ubukorikori rya Kageyo ryizihije abanyeshuri 120",
                date: "2025-05-10",
                author: "ISHIMWE Eric",
                image: "https://images.unsplash.com/photo-1523050854058-8df90110c9f1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                content: "Ishuri ry'ubukorikori rya Kageyo ryizihije abanyeshuri 120 bize imyuga itandukanye. Uru rubuga rwabereye mu ishuri ry'ubukorikori rya Kageyo, aho abanyeshuri bose bahuriye mu birori by'umunsi mukuru. Abanyeshuri bose bari bafite imyaka 18 kugeza kuri 25, kandi bari bize imyuga itandukanye nka welding, electricity, plumbing, na carpentry. Abanyeshuri bose bari bafite imyaka 18 kugeza kuri 25, kandi bari bize imyuga itandukanye nka welding, electricity, plumbing, na carpentry. Abanyeshuri bose bari bafite imyaka 18 kugeza kuri 25, kandi bari bize imyuga itandukanye nka welding, electricity, plumbing, na carpentry. Abanyeshuri bose bari bafite imyaka 18 kugeza kuri 25, kandi bari bize imyuga itandukanye nka welding, electricity, plumbing, na carpentry. Abanyeshuri bose bari bafite imyaka 18 kugeza kuri 25, kandi bari bize imyuga itandukanye nka welding, electricity, plumbing, na carpentry. Abanyeshuri bose bari bafite imyaka 18 kugeza kuri 25, kandi bari bize imyuga itandukanye nka welding, electricity, plumbing, na carpentry.",
                excerpt: "Ishuri ry'ubukorikori rya Kageyo ryizihije abanyeshuri 120 bize imyuga itandukanye. Uru rubuga rwabereye mu ishuri ry'ubukorikori rya Kageyo."
            },
            {
                id: "new-workshop",
                title: "Ishuri ry'ubukorikori rya Kageyo ryubatswe n'ishuri ry'ubukorikori rya Kageyo",
                date: "2025-05-05",
                author: "ISHIMWE Eric",
                image: "https://images.unsplash.com/photo-1581094794329-c8112a89af12?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                content: "Ishuri ry'ubukorikori rya Kageyo ryubatswe n'ishuri ry'ubukorikori rya Kageyo. Iri shuri ryubatswe mu mwaka wa 2025, kandi riracyari mu bikorwa byo kubaka. Iri shuri riracyari mu bikorwa byo kubaka, kandi riracyari mu bikorwa byo kubaka. Iri shuri riracyari mu bikorwa byo kubaka, kandi riracyari mu bikorwa byo kubaka. Iri shuri riracyari mu bikorwa byo kubaka, kandi riracyari mu bikorwa byo kubaka. Iri shuri riracyari mu bikorwa byo kubaka, kandi riracyari mu bikorwa byo kubaka. Iri shuri riracyari mu bikorwa byo kubaka, kandi riracyari mu bikorwa byo kubaka. Iri shuri riracyari mu bikorwa byo kubaka, kandi riracyari mu bikorwa byo kubaka. Iri shuri riracyari mu bikorwa byo kubaka, kandi riracyari mu bikorwa byo kubaka. Iri shuri riracyari mu bikorwa byo kubaka, kandi riracyari mu bikorwa byo kubaka. Iri shuri riracyari mu bikorwa byo kubaka, kandi riracyari mu bikorwa byo kubaka. Iri shuri riracyari mu bikorwa byo kubaka, kandi riracyari mu bikorwa byo kubaka.",
                excerpt: "Ishuri ry'ubukorikori rya Kageyo ryubatswe n'ishuri ry'ubukorikori rya Kageyo. Iri shuri ryubatswe mu mwaka wa 2025."
            }
        ];

        // YouTube Shorts data
        const youtubeShorts = [
            {
                id: "short1",
                title: "Abanyeshuri b'ishuri ry'ubukorikori ba Kageyo bakora imirimo yo kubaza",
                videoId: "dQw4w9WgXcQ",
                date: "2025-05-18"
            },
            {
                id: "short2",
                title: "Ishuri ry'ubukorikori rya Kageyo ryizihije abanyeshuri 120",
                videoId: "dQw4w9WgXcQ",
                date: "2025-05-15"
            },
            {
                id: "short3",
                title: "Abanyeshuri 50 b'ishuri ry'ubukorikori ba Kageyo bahawe ibikoresho bya welding",
                videoId: "dQw4w9WgXcQ",
                date: "2025-05-10"
            },
            {
                id: "short4",
                title: "Ishuri ry'ubukorikori rya Kageyo ryubatswe n'ishuri ry'ubukorikori rya Kageyo",
                videoId: "dQw4w9WgXcQ",
                date: "2025-05-05"
            }
        ];

        // Current page state
        let currentPage = 1;
        const itemsPerPage = 6;
        let currentNewsId = null;

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Load news data
            loadNewsData();
            
            // Load YouTube Shorts
            loadYouTubeShorts();
            
            // Set up event listeners
            setupEventListeners();
            
            // Show news list by default
            showNewsList();
        });

        // Load news data
        function loadNewsData() {
            // News data is already loaded in the newsData variable
            // This function can be used to fetch from API if needed
        }

        // Load YouTube Shorts
        function loadYouTubeShorts() {
            const shortsContainer = document.getElementById('shorts-container');
            shortsContainer.innerHTML = '';
            
            youtubeShorts.forEach(short => {
                const shortElement = document.createElement('div');
                shortElement.className = 'news-card';
                shortElement.innerHTML = `
                    <div class="relative pb-[177.78%]"> <!-- 9:16 aspect ratio -->
                        <iframe class="absolute top-0 left-0 w-full h-full" 
                            src="https://www.youtube.com/embed/${short.videoId}" 
                            title="${short.title}"
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                        </iframe>
                    </div>
                    <div class="news-content">
                        <div class="news-date">${formatDate(short.date)}</div>
                        <h3 class="news-title">${short.title}</h3>
                        <a href="https://www.youtube.com/shorts/${short.videoId}" target="_blank" class="read-more-btn">
                            Watch on YouTube <i class="fas fa-external-link-alt"></i>
                        </a>
                    </div>
                `;
                shortsContainer.appendChild(shortElement);
            });
        }

        // Show news list view
        function showNewsList() {
            document.getElementById('news-list-view').style.display = 'block';
            document.getElementById('news-detail-view').style.display = 'none';
            
            // Update navigation active state
            updateNavigationActiveState('news-list');
            
            // Load featured news
            loadFeaturedNews();
            
            // Load news grid
            loadNewsGrid();
            
            // Load pagination
            loadPagination();
        }

        // Show news detail view
        function showNewsDetail(newsId) {
            document.getElementById('news-list-view').style.display = 'none';
            document.getElementById('news-detail-view').style.display = 'block';
            
            // Update navigation active state
            updateNavigationActiveState('news-detail');
            
            // Load news detail
            loadNewsDetail(newsId);
            
            // Set current news ID
            currentNewsId = newsId;
        }

        // Load featured news
        function loadFeaturedNews() {
            const featuredContainer = document.getElementById('featured-news');
            
            // Get the latest news as featured
            const featuredNews = newsData[0];
            
            if (featuredNews) {
                featuredContainer.innerHTML = `
                    <div class="featured-news" onclick="showNewsDetail('${featuredNews.id}')">
                        <img src="${featuredNews.image}" alt="${featuredNews.title}" class="featured-image">
                        <div class="featured-content">
                            <div class="news-date">${formatDate(featuredNews.date)}</div>
                            <h2 class="featured-title">${featuredNews.title}</h2>
                            <p class="featured-excerpt">${featuredNews.excerpt}</p>
                            <a href="#" class="read-more-btn" onclick="event.stopPropagation(); showNewsDetail('${featuredNews.id}')">
                                Read More <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                `;
            }
        }

        // Load news grid
        function loadNewsGrid() {
            const newsGrid = document.getElementById('news-grid');
            newsGrid.innerHTML = '';
            
            // Calculate start and end index for current page
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const currentNews = newsData.slice(startIndex, endIndex);
            
            if (currentNews.length === 0) {
                newsGrid.innerHTML = '<p class="text-center text-gray-500 col-span-full">No news articles found.</p>';
                return;
            }
            
            currentNews.forEach(news => {
                const newsElement = document.createElement('div');
                newsElement.className = 'news-card';
                newsElement.onclick = () => showNewsDetail(news.id);
                newsElement.innerHTML = `
                    <img src="${news.image}" alt="${news.title}" class="news-image">
                    <div class="news-content">
                        <div class="news-date">${formatDate(news.date)}</div>
                        <h3 class="news-title">${news.title}</h3>
                        <p class="news-excerpt">${news.excerpt}</p>
                        <a href="#" class="read-more-btn" onclick="event.stopPropagation(); showNewsDetail('${news.id}')">
                            Read More <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                `;
                newsGrid.appendChild(newsElement);
            });
        }

        // Load news detail
        function loadNewsDetail(newsId) {
            const newsDetailContent = document.getElementById('news-detail-content');
            const news = newsData.find(item => item.id === newsId);
            
            if (!news) {
                newsDetailContent.innerHTML = '<p class="text-center text-gray-500">News article not found.</p>';
                return;
            }
            
            // Find current news index for navigation
            const currentIndex = newsData.findIndex(item => item.id === newsId);
            const prevNews = currentIndex > 0 ? newsData[currentIndex - 1] : null;
            const nextNews = currentIndex < newsData.length - 1 ? newsData[currentIndex + 1] : null;
            
            // Load related news (excluding current news)
            const relatedNews = newsData
                .filter(item => item.id !== newsId)
                .slice(0, 3);
            
            let relatedNewsHTML = '';
            if (relatedNews.length > 0) {
                relatedNewsHTML = `
                    <div class="related-news">
                        <h3 class="related-title">Related News</h3>
                        <div class="news-grid">
                            ${relatedNews.map(item => `
                                <div class="news-card" onclick="showNewsDetail('${item.id}')">
                                    <img src="${item.image}" alt="${item.title}" class="news-image">
                                    <div class="news-content">
                                        <div class="news-date">${formatDate(item.date)}</div>
                                        <h4 class="news-title">${item.title}</h4>
                                        <p class="news-excerpt">${item.excerpt}</p>
                                        <a href="#" class="read-more-btn" onclick="event.stopPropagation(); showNewsDetail('${item.id}')">
                                            Read More <i class="fas fa-arrow-right"></i>
                                        </a>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            newsDetailContent.innerHTML = `
                <img src="${news.image}" alt="${news.title}" class="news-detail-image">
                <h1 class="news-detail-title">${news.title}</h1>
                <div class="news-detail-meta">
                    <span class="news-detail-author">By ${news.author}</span>
                    <span class="news-detail-date">${formatDate(news.date)}</span>
                </div>
                <div class="news-detail-content">
                    ${news.content.split('\n').map(paragraph => `<p>${paragraph}</p>`).join('')}
                </div>
                
                <div class="page-navigation">
                    ${prevNews ? `
                        <a href="#" class="nav-btn prev" onclick="showNewsDetail('${prevNews.id}')">
                            <i class="fas fa-arrow-left"></i> Previous: ${prevNews.title.substring(0, 30)}...
                        </a>
                    ` : '<div></div>'}
                    
                    ${nextNews ? `
                        <a href="#" class="nav-btn next" onclick="showNewsDetail('${nextNews.id}')">
                            Next: ${nextNews.title.substring(0, 30)}... <i class="fas fa-arrow-right"></i>
                        </a>
                    ` : '<div></div>'}
                </div>
                
                ${relatedNewsHTML}
            `;
        }

        // Load pagination
        function loadPagination() {
            const pagination = document.getElementById('pagination');
            const totalPages = Math.ceil(newsData.length / itemsPerPage);
            
            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }
            
            let paginationHTML = '';
            
            // Previous button
            if (currentPage > 1) {
                paginationHTML += `
                    <li>
                        <a href="#" class="px-3 py-2 bg-white border border-gray-300 rounded-md hover:bg-blue-100" 
                           onclick="changePage(${currentPage - 1})" aria-label="Go to previous page">
                            <i class="fas fa-chevron-left" aria-hidden="true"></i>
                        </a>
                    </li>
                `;
            }
            
            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                if (i === currentPage) {
                    paginationHTML += `
                        <li>
                            <a href="#" class="px-3 py-2 bg-blue-600 text-white border border-blue-600 rounded-md" 
                               aria-label="Current page, page ${i}" aria-current="page">${i}</a>
                        </li>
                    `;
                } else {
                    paginationHTML += `
                        <li>
                            <a href="#" class="px-3 py-2 bg-white border border-gray-300 rounded-md hover:bg-blue-100" 
                               onclick="changePage(${i})" aria-label="Go to page ${i}">${i}</a>
                        </li>
                    `;
                }
            }
            
            // Next button
            if (currentPage < totalPages) {
                paginationHTML += `
                    <li>
                        <a href="#" class="px-3 py-2 bg-white border border-gray-300 rounded-md hover:bg-blue-100" 
                           onclick="changePage(${currentPage + 1})" aria-label="Go to next page">
                            <i class="fas fa-chevron-right" aria-hidden="true"></i>
                        </a>
                    </li>
                `;
            }
            
            pagination.innerHTML = paginationHTML;
        }

        // Change page
        function changePage(page) {
            currentPage = page;
            loadNewsGrid();
            loadPagination();
            
            // Scroll to top of news section
            document.getElementById('news-list-view').scrollIntoView({ behavior: 'smooth' });
        }

        // Show all news (no pagination)
        function showAllNews() {
            const newsGrid = document.getElementById('news-grid');
            newsGrid.innerHTML = '';
            
            newsData.forEach(news => {
                const newsElement = document.createElement('div');
                newsElement.className = 'news-card';
                newsElement.onclick = () => showNewsDetail(news.id);
                newsElement.innerHTML = `
                    <img src="${news.image}" alt="${news.title}" class="news-image">
                    <div class="news-content">
                        <div class="news-date">${formatDate(news.date)}</div>
                        <h3 class="news-title">${news.title}</h3>
                        <p class="news-excerpt">${news.excerpt}</p>
                        <a href="#" class="read-more-btn" onclick="event.stopPropagation(); showNewsDetail('${news.id}')">
                            Read More <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                `;
                newsGrid.appendChild(newsElement);
            });
            
            // Hide pagination
            document.getElementById('pagination').innerHTML = '';
            
            // Update navigation active state
            updateNavigationActiveState('all-news');
        }

        // Update navigation active state
        function updateNavigationActiveState(activeItem) {
            const navItems = document.querySelectorAll('#subNavOptionn .nav-item');
            navItems.forEach(item => {
                item.classList.remove('active');
            });
            
            if (activeItem === 'news-list') {
                navItems[0].classList.add('active');
            } else if (activeItem === 'all-news') {
                navItems[1].classList.add('active');
            }
        }

        // Format date
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('en-US', options);
        }

        // Setup event listeners
        function setupEventListeners() {
            // Image preview for admin form
            document.getElementById('news-image').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('preview-img').src = e.target.result;
                        document.getElementById('image-preview').style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            // News form submission
            document.getElementById('news-form').addEventListener('submit', function(e) {
                e.preventDefault();
                addNewsArticle();
            });
        }

        // Existing functions (unchanged)
        function myFunction() {
            document.getElementById("loader").style.display = "none";
        }

        function toggleNav() {
            const navbar = document.getElementById("navbar");
            navbar.classList.toggle("hidden");
        }

        function toggleSubNav() {
            const subNavbar = document.getElementById("subNavbarSupportedContent");
            subNavbar.classList.toggle("hidden");
        }

        function toggleDropdown(id) {
            const dropdown = document.getElementById(id);
            dropdown.classList.toggle("active");
            
            // Close other dropdowns
            const allDropdowns = document.querySelectorAll('.dropdown-menu');
            allDropdowns.forEach(drop => {
                if (drop.id !== id && drop.classList.contains('active')) {
                    drop.classList.remove('active');
                }
            });
        }

        function openAdminPanel() {
            document.body.classList.add('admin-active');
        }

        function closeAdminPanel() {
            document.body.classList.remove('admin-active');
            document.getElementById('admin-password').value = '';
        }

        function adminLogin() {
            const password = document.getElementById('admin-password').value;
            if (password === 'admin123') {
                document.getElementById('admin-controls').classList.remove('hidden');
                closeAdminPanel();
            } else {
                alert('Incorrect password. Please try again.');
            }
        }

        function adminLogout() {
            document.getElementById('admin-controls').classList.add('hidden');
            hideAddNewsForm();
        }

        function showAddNewsForm() {
            document.getElementById('add-news-form').classList.remove('hidden');
        }

        function hideAddNewsForm() {
            document.getElementById('add-news-form').classList.add('hidden');
            document.getElementById('news-form').reset();
            document.getElementById('image-preview').style.display = 'none';
        }

        function addNewsArticle() {
            const title = document.getElementById('news-title').value;
            const author = document.getElementById('news-author').value;
            const date = document.getElementById('news-date').value;
            const content = document.getElementById('news-content').value;
            
            // Generate excerpt from content (first 150 characters)
            const excerpt = content.substring(0, 150) + '...';
            
            // Generate a unique ID
            const id = 'news-' + Date.now();
            
            // Get image preview or use default
            const imagePreview = document.getElementById('preview-img');
            const imageSrc = imagePreview.src || 'https://images.unsplash.com/photo-1581094794329-c8112a89af12?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80';
            
            // Create new news article
            const newArticle = {
                id: id,
                title: title,
                date: date,
                author: author,
                image: imageSrc,
                content: content,
                excerpt: excerpt
            };
            
            // Add to the beginning of newsData array
            newsData.unshift(newArticle);
            
            // Save to localStorage
            localStorage.setItem('kageyoNews', JSON.stringify(newsData));
            
            // Reset form and hide it
            hideAddNewsForm();
            
            // Reload news list to show the new article
            showNewsList();
            
            // Show success message
            alert('News article added successfully!');
        }

        // Chatbot functionality
        document.getElementById('chatbot-toggle').addEventListener('click', function() {
            const chatbotWindow = document.getElementById('chatbot-window');
            chatbotWindow.classList.toggle('active');
            this.setAttribute('aria-expanded', chatbotWindow.classList.contains('active'));
        });

        document.getElementById('chatbot-close').addEventListener('click', function() {
            document.getElementById('chatbot-window').classList.remove('active');
            document.getElementById('chatbot-toggle').setAttribute('aria-expanded', 'false');
        });

        document.getElementById('chatbot-send').addEventListener('click', sendChatbotMessage);
        document.getElementById('chatbot-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendChatbotMessage();
            }
        });

        function sendChatbotMessage() {
            const input = document.getElementById('chatbot-input');
            const message = input.value.trim();
            
            if (message) {
                // Add user message
                addChatbotMessage(message, 'user');
                
                // Clear input
                input.value = '';
                
                // Generate bot response
                setTimeout(() => {
                    const response = generateChatbotResponse(message);
                    addChatbotMessage(response, 'bot');
                }, 1000);
            }
        }

        function addChatbotMessage(message, sender) {
            const messagesContainer = document.getElementById('chatbot-messages');
            const messageElement = document.createElement('div');
            messageElement.className = sender === 'user' ? 'chatbot-user-message' : 'chatbot-bot-message';
            messageElement.textContent = message;
            messagesContainer.appendChild(messageElement);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function generateChatbotResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('news') || lowerMessage.includes('article')) {
                return "We have exciting news about Kageyo TVET School! Check out our latest articles about the Tech Innovation Fair, new Welding Program, and graduation ceremonies. Which topic interests you most?";
            } else if (lowerMessage.includes('welding') || lowerMessage.includes('program')) {
                return "Our welding program recently received new equipment for 50 students! This has significantly improved their practical training. Would you like to know more about our trades and programs?";
            } else if (lowerMessage.includes('graduation') || lowerMessage.includes('ceremony')) {
                return "We recently celebrated the graduation of 120 students from various trades. It was a joyful ceremony marking their transition to skilled professionals. Would you like information about our upcoming graduation events?";
            } else if (lowerMessage.includes('apply') || lowerMessage.includes('registration')) {
                return "To apply to Kageyo TVET School, visit our 'Apply for a Job' page for detailed information about requirements and the application process. Is there a specific trade you're interested in?";
            } else if (lowerMessage.includes('contact') || lowerMessage.includes('location')) {
                return "Kageyo TVET School is located in Northern Province, Gicumbi District, Kaniga Sector. You can find our contact details on the Contact page. Would you like me to direct you there?";
            } else if (lowerMessage.includes('salary') || lowerMessage.includes('payment')) {
                return "For information about salaries and payments, please contact our administration office directly. They can provide specific details based on position and experience.";
            } else {
                return "I'm here to help with information about Kageyo TVET School! You can ask me about news, programs, registration, or contact information. What would you like to know?";
            }
        }

        // Scroll to top functionality
        window.addEventListener('scroll', function() {
            const scrollTop = document.getElementById('scroll-top');
            if (window.pageYOffset > 300) {
                scrollTop.classList.remove('hidden');
            } else {
                scrollTop.classList.add('hidden');
            }
        });

        document.getElementById('scroll-top').addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    </script>
</body>
</html>